<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <title>Menú Principal - DHM SISTEMAS</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Control de acceso y mensaje emergente si no está logueado -->
    <script>
        (function () {
            // Función para mostrar mensaje emergente central
            function showEmergenteLogin(msj, ms = 2200) {
                // Evita duplicados
                if (document.getElementById('emergente-login')) return;
                // Crea el contenedor
                const div = document.createElement('div');
                div.id = 'emergente-login';
                div.style.position = 'fixed';
                div.style.top = '30%';
                div.style.left = '50%';
                div.style.transform = 'translate(-50%, -50%)';
                div.style.background = '#18181c';
                div.style.color = '#fff';
                div.style.padding = '32px 36px 22px 36px';
                div.style.borderRadius = '18px';
                div.style.boxShadow = '0 8px 24px #0008';
                div.style.fontSize = '1.23em';
                div.style.zIndex = 99999;
                div.style.textAlign = 'center';
                div.style.border = '2.2px solid #e44343';

                // Ícono SVG de advertencia (opcional)
                div.innerHTML = `
            <div style="font-size:2.1em;margin-bottom:10px;">&#9888;&#65039;</div>
            <div>${msj}</div>
        `;
                document.body.appendChild(div);
                setTimeout(() => {
                    div.remove();
                    window.location.href = "login.html";
                }, ms);
            }

            // Chequeo de usuario logueado
            try {
                const userRaw = localStorage.getItem('usuarioLogueado');
                if (!userRaw) throw 1;
                const user = JSON.parse(userRaw);
                if (!user || Object.keys(user).length === 0) throw 1;
            } catch {
                // Mostrar mensaje emergente y redirigir tras 2 segundos
                document.addEventListener('DOMContentLoaded', function () {
                    showEmergenteLogin("Debés iniciar sesión para acceder al sistema", 2200);
                });
            }
        })();
    </script>
    <link rel="stylesheet" href="../../shared/css/encabezados.css">
    <link rel="stylesheet" href="../../shared/css/notify.css">
    <link rel="stylesheet" href="../CSS/menuprincipal.css">
    <link rel="shortcut icon" href="../../../recursos/logos/carrito.png" type="image/png">
</head>

<body>
    <div class="layout-menuprincipal">
        <aside class="sidebar">
            <div class="sidebar-logo">
                <img src="../../../recursos/logos/comercia.png" alt="Logo DHM SISTEMAS" class="logo-dhm"
                    draggable="false">
            </div>
            <nav class="menu-vertical">
                <ul>
                    <!--GEST-ADM GRAL-->
                    <li class="menu-item menu-has-sub" data-opcion="adm-gral">
                        <span class="menu-link">
                            <!-- Icono settings -->
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                                <circle cx="12" cy="12" r="10" stroke="#fff" stroke-width="2" />
                                <path d="M12 8v4l3 3" stroke="#888" stroke-width="2" stroke-linecap="round" />
                            </svg>
                            Adm-Gral
                            <svg class="chevron" width="18" height="18" viewBox="0 0 20 20" fill="none">
                                <path d="M6 8l4 4 4-4" stroke="#fff" stroke-width="2" stroke-linecap="round" />
                            </svg>
                        </span>
                        <ul class="submenu">
                            <li>
                                <a href="../../comercios/html/comercio.html" class="submenu-link">
                                    <!-- Icono building -->
                                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
                                        <rect x="4" y="4" width="16" height="16" stroke="#fff" stroke-width="2" />
                                        <path d="M9 20V10h6v10" stroke="#888" stroke-width="2" />
                                    </svg>
                                    Comercios
                                </a>
                            </li>
                            <li>
                                <a href="../../usuarios/html/gestionusuarios.html" class="submenu-link">
                                    <!-- Icono users -->
                                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
                                        <circle cx="8" cy="8" r="3" stroke="#fff" stroke-width="2" />
                                        <circle cx="16" cy="8" r="3" stroke="#888" stroke-width="2" />
                                        <path d="M4 20c0-3 4-5 8-5s8 2 8 5" stroke="#888" stroke-width="2" />
                                    </svg>
                                    Usuarios
                                </a>
                            </li>
                        </ul>
                    </li>
                    <!-- GEST.ADM COMERCIO-->
                    <li class="menu-item menu-has-sub" data-opcion="adm-comercio">
                        <span class="menu-link">
                            <!-- Icono commerce -->
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                                <rect x="3" y="8" width="18" height="8" rx="2" stroke="#fff" stroke-width="2" />
                                <path d="M16 8V6a4 4 0 00-8 0v2" stroke="#888" stroke-width="2" />
                            </svg>
                            Adm-Comercio
                            <svg class="chevron" width="18" height="18" viewBox="0 0 20 20" fill="none">
                                <path d="M6 8l4 4 4-4" stroke="#fff" stroke-width="2" stroke-linecap="round" />
                            </svg>
                        </span>
                        <ul class="submenu">
                            <li>
                                <a href="../../comercios/html/comercioxadm.html" class="submenu-link">
                                    <!-- Icono building -->
                                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
                                        <rect x="4" y="4" width="16" height="16" stroke="#fff" stroke-width="2" />
                                        <path d="M9 20V10h6v10" stroke="#888" stroke-width="2" />
                                    </svg>
                                    Comercio
                                </a>
                            </li>
                            <li>
                                <a href="../../usuarios/html/usuariosxadm.html" class="submenu-link">
                                    <!-- Icono users (igual que en usuarios) -->
                                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
                                        <circle cx="8" cy="8" r="3" stroke="#fff" stroke-width="2" />
                                        <circle cx="16" cy="8" r="3" stroke="#888" stroke-width="2" />
                                        <path d="M4 20c0-3 4-5 8-5s8 2 8 5" stroke="#888" stroke-width="2" />
                                    </svg>
                                    Usuarios-Comercio
                                </a>
                            </li>
                        </ul>
                    </li>
                    <!-- GEST-PROVEEDORES -->
                    <li class="menu-item menu-has-sub" data-opcion="gest-proveedores">
                        <span class="menu-link">
                            <!-- Icono proveedor (briefcase) -->
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                                <rect x="3" y="7" width="18" height="13" rx="3" stroke="#fff" stroke-width="2" />
                                <path d="M7 7V5a5 5 0 0 1 10 0v2" stroke="#888" stroke-width="2" />
                            </svg>
                            Gest-Proveedores
                            <svg class="chevron" width="18" height="18" viewBox="0 0 20 20" fill="none">
                                <path d="M6 8l4 4 4-4" stroke="#fff" stroke-width="2" stroke-linecap="round" />
                            </svg>
                        </span>
                        <ul class="submenu">
                            <li>
                                <a href="../../proveedores/html/proveedores.html" class="submenu-link">
                                    <!-- Icono proveedor pequeño -->
                                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
                                        <rect x="3" y="7" width="18" height="13" rx="3" stroke="#fff"
                                            stroke-width="2" />
                                        <path d="M7 7V5a5 5 0 0 1 10 0v2" stroke="#888" stroke-width="2" />
                                    </svg>
                                    Proveedor
                                </a>
                            </li>
                        </ul>
                    </li>
                    <!-- NUEVO: GEST-RUBROS -->
                    <li class="menu-item menu-has-sub" data-opcion="gest-rubros">
                        <span class="menu-link">
                            <!-- Icono rubros (etiqueta/categoría) -->
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                                <rect x="4" y="6" width="16" height="12" rx="3" stroke="#fff" stroke-width="2" />
                                <path d="M8 10h8v4H8z" stroke="#888" stroke-width="2" fill="none" />
                            </svg>
                            Gest-Rubros
                            <svg class="chevron" width="18" height="18" viewBox="0 0 20 20" fill="none">
                                <path d="M6 8l4 4 4-4" stroke="#fff" stroke-width="2" stroke-linecap="round" />
                            </svg>
                        </span>
                        <ul class="submenu">
                            <li>
                                <a href="../../rubros/html/rubros.html" class="submenu-link">
                                    <!-- Icono Rubros (categoría) -->
                                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
                                        <rect x="4" y="7" width="16" height="10" rx="2" stroke="#fff"
                                            stroke-width="2" />
                                        <path d="M8 12h8" stroke="#888" stroke-width="2" stroke-linecap="round" />
                                    </svg>
                                    Rubros
                                </a>
                            </li>
                            <li>
                                <a href="../../subrubros/html/subrubros.html" class="submenu-link">
                                    <!-- Icono Sub Rubros (subcategoría) -->
                                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
                                        <rect x="4" y="7" width="16" height="10" rx="2" stroke="#fff"
                                            stroke-width="2" />
                                        <path d="M8 12h4" stroke="#888" stroke-width="2" stroke-linecap="round" />
                                    </svg>
                                    Sub Rubros
                                </a>
                            </li>
                        </ul>
                    </li>
                    <!-- GEST-ASIGNACIONES -->
                    <li class="menu-item menu-has-sub" data-opcion="gest-rubros">
                        <span class="menu-link">
                            <!-- Icono rubros (etiqueta/categoría) -->
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                                <rect x="4" y="6" width="16" height="12" rx="3" stroke="#fff" stroke-width="2" />
                                <path d="M8 10h8v4H8z" stroke="#888" stroke-width="2" fill="none" />
                            </svg>
                            Gest-Asignaciones
                            <svg class="chevron" width="18" height="18" viewBox="0 0 20 20" fill="none">
                                <path d="M6 8l4 4 4-4" stroke="#fff" stroke-width="2" stroke-linecap="round" />
                            </svg>
                        </span>
                        <ul class="submenu">
                            <li>
                                <a href="../../iva/html/iva.html" class="submenu-link">
                                    <!-- Icono Rubros (categoría) -->
                                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
                                        <rect x="4" y="7" width="16" height="10" rx="2" stroke="#fff"
                                            stroke-width="2" />
                                        <path d="M8 12h8" stroke="#888" stroke-width="2" stroke-linecap="round" />
                                    </svg>
                                    Iva
                                </a>
                            </li>
                            <li>
                                <a href="../../porganancias/html/porganancia.html" class="submenu-link">
                                    <!-- Icono Sub Rubros (subcategoría) -->
                                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
                                        <rect x="4" y="7" width="16" height="10" rx="2" stroke="#fff"
                                            stroke-width="2" />
                                        <path d="M8 12h4" stroke="#888" stroke-width="2" stroke-linecap="round" />
                                    </svg>
                                    % Ganancia
                                </a>
                            </li>
                            <li>
                                <a href="../../porfracciones/html/porfraccion.html" class="submenu-link">
                                    <!-- Icono Sub Rubros (subcategoría) -->
                                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
                                        <rect x="4" y="7" width="16" height="10" rx="2" stroke="#fff"
                                            stroke-width="2" />
                                        <path d="M8 12h4" stroke="#888" stroke-width="2" stroke-linecap="round" />
                                    </svg>
                                    Fracciones
                                </a>
                            </li>
                            <li>
                                <a href="../../importar/html/importarfile.html" class="submenu-link">
                                    <!-- Icono Sub Rubros (subcategoría) -->
                                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
                                        <rect x="4" y="7" width="16" height="10" rx="2" stroke="#fff"
                                            stroke-width="2" />
                                        <path d="M8 12h4" stroke="#888" stroke-width="2" stroke-linecap="round" />
                                    </svg>
                                    Importar XLS-CVS
                                </a>
                            </li>
                        </ul>
                    </li>
                    <!-- GEST-ARTICULOS -->
                    <li class="menu-item menu-has-sub" data-opcion="gest-rubros">
                        <span class="menu-link">
                            <!-- Icono rubros (etiqueta/categoría) -->
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                                <rect x="4" y="6" width="16" height="12" rx="3" stroke="#fff" stroke-width="2" />
                                <path d="M8 10h8v4H8z" stroke="#888" stroke-width="2" fill="none" />
                            </svg>
                            Gest-Articulos
                            <svg class="chevron" width="18" height="18" viewBox="0 0 20 20" fill="none">
                                <path d="M6 8l4 4 4-4" stroke="#fff" stroke-width="2" stroke-linecap="round" />
                            </svg>
                        </span>
                        <ul class="submenu">
                            <li>
                                <a href="../../articulomanual/html/articulocm.html" class="submenu-link">
                                    <!-- Icono Rubros (categoría) -->
                                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
                                        <rect x="4" y="7" width="16" height="10" rx="2" stroke="#fff"
                                            stroke-width="2" />
                                        <path d="M8 12h8" stroke="#888" stroke-width="2" stroke-linecap="round" />
                                    </svg>
                                    Articulo Puro
                                </a>
                            </li>
                            <li>
                                <a href="../../articulofraccionmanual/html/articulofraccioncm.html" class="submenu-link">
                                    <!-- Icono Sub Rubros (subcategoría) -->
                                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
                                        <rect x="4" y="7" width="16" height="10" rx="2" stroke="#fff"
                                            stroke-width="2" />
                                        <path d="M8 12h4" stroke="#888" stroke-width="2" stroke-linecap="round" />
                                    </svg>
                                    Articulo Fraccionado
                                </a>
                            </li>
                        </ul>
                        <ul class="submenu">
                            <li>
                                <a href="../../articulomanual/html/articulocm.html" class="submenu-link">
                                    <!-- Icono Rubros (categoría) -->
                                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
                                        <rect x="4" y="7" width="16" height="10" rx="2" stroke="#fff"
                                            stroke-width="2" />
                                        <path d="M8 12h8" stroke="#888" stroke-width="2" stroke-linecap="round" />
                                    </svg>
                                    Articulo por Plantilla
                                </a>
                            </li>
                            <li>
                                <a href="../../articulos/html/" class="submenu-link">
                                    <!-- Icono Sub Rubros (subcategoría) -->
                                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
                                        <rect x="4" y="7" width="16" height="10" rx="2" stroke="#fff"
                                            stroke-width="2" />
                                        <path d="M8 12h4" stroke="#888" stroke-width="2" stroke-linecap="round" />
                                    </svg>
                                    Carga por Planilla
                                </a>
                            </li>
                        </ul>

                    </li>
                    <!-- GEST-STOCK -->
                    <li class="menu-item">
                        <a href="#" class="menu-link">
                            <!-- Icono stock -->
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                                <rect x="4" y="7" width="16" height="10" rx="2" stroke="#fff" stroke-width="2" />
                                <path d="M4 12h16" stroke="#888" stroke-width="2" />
                            </svg>
                            Gest-Stock
                        </a>
                    </li>
                    <li class="menu-item">
                        <a href="#" class="menu-link">
                            <!-- Icono compras -->
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                                <circle cx="9" cy="20" r="2" stroke="#fff" stroke-width="2" />
                                <circle cx="17" cy="20" r="2" stroke="#888" stroke-width="2" />
                                <path d="M5 6h14l-1.5 9h-11L5 6z" stroke="#fff" stroke-width="2" />
                            </svg>
                            Gest-Compras
                        </a>
                    </li>
                    <li class="menu-item">
                        <a href="#" class="menu-link">
                            <!-- Icono ventas -->
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                                <circle cx="8" cy="20" r="2" stroke="#fff" stroke-width="2" />
                                <circle cx="16" cy="20" r="2" stroke="#888" stroke-width="2" />
                                <path d="M4 6h16l-1.5 9h-13L4 6z" stroke="#fff" stroke-width="2" />
                            </svg>
                            Gest-Ventas
                        </a>
                    </li>
                    <li class="menu-item">
                        <a href="#" class="menu-link">
                            <!-- Icono gastos -->
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                                <rect x="5" y="5" width="14" height="14" rx="4" stroke="#fff" stroke-width="2" />
                                <path d="M12 8v4h4" stroke="#888" stroke-width="2" />
                            </svg>
                            Gest-Gastos
                        </a>
                    </li>
                    <li class="menu-item menu-has-sub" data-opcion="gest-personalizar">
                        <span class="menu-link">
                            <!-- Icono engranaje (blanco y negro) -->
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                                <circle cx="12" cy="12" r="10" stroke="#fff" stroke-width="2" />
                                <path d="M12 8v4l2 2" stroke="#888" stroke-width="2" stroke-linecap="round" />
                            </svg>
                            Gest-Personalizar
                            <svg class="chevron" width="18" height="18" viewBox="0 0 20 20" fill="none">
                                <path d="M6 8l4 4 4-4" stroke="#fff" stroke-width="2" stroke-linecap="round" />
                            </svg>
                        </span>
                        <ul class="submenu">
                            <li>
                                <a href="pantalla.html" class="submenu-link">
                                    <!-- Icono pantalla (monitor) blanco y negro -->
                                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
                                        <rect x="3" y="4" width="18" height="14" rx="2" stroke="#fff"
                                            stroke-width="2" />
                                        <path d="M8 20h8M10 18h4" stroke="#888" stroke-width="2"
                                            stroke-linecap="round" />
                                    </svg>
                                    Pantalla
                                </a>
                            </li>
                        </ul>
                    </li>
                </ul>
            </nav>
        </aside>
        <div class="main-content">
            <header class="header-menuprincipal">
                <div class="header-left">
                    <button class="cerrar-sesion-btn" onclick="cerrarSesion()" title="Cerrar sesión">
                        <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="none" viewBox="0 0 24 24">
                            <path d="M15.5 17L20 12M20 12L15.5 7M20 12H8" stroke="#fff" stroke-width="2"
                                stroke-linecap="round" stroke-linejoin="round" />
                            <path d="M12 19C8.13401 19 5 15.866 5 12C5 8.13401 8.13401 5 12 5" stroke="#888"
                                stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                        </svg>
                    </button>
                </div>
                <div class="usuario-info">
                    <span class="icono-usuario">
                        <svg xmlns="http://www.w3.org/2000/svg" width="34" height="34" fill="none" viewBox="0 0 24 24">
                            <circle cx="12" cy="8" r="4" stroke="#fff" stroke-width="2" fill="#18181c" />
                            <path d="M4 20c0-4 4-6 8-6s8 2 8 6" stroke="#888" stroke-width="2" fill="none" />
                        </svg>
                    </span>
                    <span id="datos-usuario"></span>
                </div>
            </header>
            <main class="contenido-menuprincipal">
                <!-- Aquí el contenido del menú principal -->
            </main>
        </div>
    </div>
    <script src="../../shared/js/utilidadusuarios.js"></script>
    <script src="../../shared/js/notify.js"></script>
    <script src="../JS/menuprincipal.js"></script>
    <script src="../../shared/js/cerrarsecion.js"></script>


</body>

</html>